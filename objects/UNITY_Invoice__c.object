<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>Accept</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <allowInChatterGroups>false</allowInChatterGroups>
    <compactLayoutAssignment>SYSTEM</compactLayoutAssignment>
    <deploymentStatus>Deployed</deploymentStatus>
    <description>UNITY Invoice object</description>
    <enableActivities>true</enableActivities>
    <enableBulkApi>true</enableBulkApi>
    <enableChangeDataCapture>false</enableChangeDataCapture>
    <enableEnhancedLookup>true</enableEnhancedLookup>
    <enableFeeds>true</enableFeeds>
    <enableHistory>true</enableHistory>
    <enableReports>true</enableReports>
    <enableSearch>true</enableSearch>
    <enableSharing>true</enableSharing>
    <enableStreamingApi>true</enableStreamingApi>
    <externalSharingModel>Private</externalSharingModel>
    <fields>
        <fullName>MSPFS_Intercompany_SL_Processed__c</fullName>
        <defaultValue>false</defaultValue>
        <description>Denotes that the intercompany transfer invoice was sent to SL</description>
        <externalId>false</externalId>
        <label>Intercompany SL Processed</label>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>MSPFS_Intercompany_Transfer__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>Intercompany Transfer</label>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>UNITY_Agent__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <description>Holds the Agent information related to the Invoice Case</description>
        <externalId>false</externalId>
        <label>Agent</label>
        <referenceTo>User</referenceTo>
        <relationshipName>Invoices</relationshipName>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>UNITY_Bill_To_Address__c</fullName>
        <externalId>false</externalId>
        <formula>IF(UNITY_Customer__r.Residential__c,
UNITY_Customer__r.MH_Primary_Contact__r.FirstName + &quot; &quot; + UNITY_Customer__r.MH_Primary_Contact__r.LastName,
IF(OR(UNITY_Customer__r.UNITY_Bill_to_Self__c,UNITY_Customer__r.MSPFS_MSP_Bill_to_Self__c),
LEFT(UNITY_Customer__r.Name,FIND(&apos; - &apos;&amp; UNITY_Customer__r.ShippingStreet,UNITY_Customer__r.Name,0)),
UNITY_Customer__r.Name
)
) + BR() +
UNITY_Customer__r.BillingStreet + BR() + 
UNITY_Customer__r.BillingCity + &quot; &quot; + 
UNITY_Customer__r.BillingState + &quot; &quot; +  
UNITY_Customer__r.BillingPostalCode + &quot; &quot; + 
UNITY_Customer__r.BillingCountry</formula>
        <label>Bill To Address</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>UNITY_Business_Unit_Account__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Business Unit Account</label>
        <referenceTo>Account</referenceTo>
        <relationshipLabel>Invoices (Business Unit Account)</relationshipLabel>
        <relationshipName>Business_Unit_Invoices</relationshipName>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>UNITY_Case_Thread_ID__c</fullName>
        <externalId>false</externalId>
        <formula>&quot;ref:_&quot;&amp;LEFT( $Organization.Id,5)&amp;SUBSTITUTE(RIGHT($Organization.Id,10),&quot;0&quot;,&quot;&quot;)&amp;&quot;._&quot;&amp;LEFT( UNITY_Case__r.Id ,5)&amp;SUBSTITUTE(LEFT(RIGHT(UNITY_Case__r.Id,10),5),&quot;0&quot;,&quot;&quot;)&amp;RIGHT(UNITY_Case__r.Id,5)&amp;&quot;:ref&quot;</formula>
        <label>Case Thread ID</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>UNITY_Case__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Case</label>
        <referenceTo>Case</referenceTo>
        <relationshipName>Invoices</relationshipName>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>UNITY_Comments__c</fullName>
        <externalId>false</externalId>
        <label>Comments</label>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>TextArea</type>
    </fields>
    <fields>
        <fullName>UNITY_Cust_Invoices_in_Service_Channel__c</fullName>
        <externalId>false</externalId>
        <formula>IF( AND(!ISBLANK(UNITY_Customer_Invoice_Methods__c),CONTAINS(UNITY_Customer_Invoice_Methods__c,&apos;Service Channel&apos;) ), true , false )</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Customer Invoices via Service Channel?</label>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>UNITY_Customer_Email__c</fullName>
        <description>Stores Customer email information from case</description>
        <externalId>false</externalId>
        <label>Customer Email</label>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Email</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>UNITY_Customer_Invoice_Methods__c</fullName>
        <description>Used to display and report on the invoicing methods of the customer</description>
        <externalId>false</externalId>
        <label>Customer Invoice Methods</label>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>TextArea</type>
    </fields>
    <fields>
        <fullName>UNITY_Customer_Service_Contract__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <description>Service Contract of Customer. Should be copied from the Case.</description>
        <externalId>false</externalId>
        <label>UNITY_Service Contract</label>
        <referenceTo>UNITY_Service_Contract__c</referenceTo>
        <relationshipName>Invoices</relationshipName>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>UNITY_Customer__c</fullName>
        <deleteConstraint>Restrict</deleteConstraint>
        <externalId>false</externalId>
        <label>Bill to Account</label>
        <referenceTo>Account</referenceTo>
        <relationshipLabel>Invoices (Customer)</relationshipLabel>
        <relationshipName>Invoices</relationshipName>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>UNITY_Discount_Amount__c</fullName>
        <externalId>false</externalId>
        <label>Discount Amount</label>
        <precision>12</precision>
        <required>false</required>
        <scale>2</scale>
        <trackFeedHistory>true</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>UNITY_Discount__c</fullName>
        <externalId>false</externalId>
        <label>Discount %</label>
        <precision>12</precision>
        <required>false</required>
        <scale>2</scale>
        <trackFeedHistory>true</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Percent</type>
    </fields>
    <fields>
        <fullName>UNITY_Discount_from_POs__c</fullName>
        <description>The relative discount of discounts applied at the PO level</description>
        <externalId>false</externalId>
        <inlineHelpText>The discounts applied at the PO level</inlineHelpText>
        <label>Discount from POs</label>
        <precision>14</precision>
        <required>false</required>
        <scale>2</scale>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>UNITY_Doc_Type__c</fullName>
        <externalId>false</externalId>
        <label>Doc Type</label>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>IN</fullName>
                    <default>true</default>
                    <label>IN</label>
                </value>
                <value>
                    <fullName>CM</fullName>
                    <default>false</default>
                    <label>CM</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>UNITY_Does_Line_Item_Discount_Amt_Exist__c</fullName>
        <externalId>false</externalId>
        <label>Does Line Item Discount Amount Exist</label>
        <summarizedField>UNITY_Invoice_Line_Item__c.UNITY_Discount_Amount__c</summarizedField>
        <summaryFilterItems>
            <field>UNITY_Invoice_Line_Item__c.UNITY_Line_Status__c</field>
            <operation>notEqual</operation>
            <value>Cancelled</value>
        </summaryFilterItems>
        <summaryForeignKey>UNITY_Invoice_Line_Item__c.UNITY_Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>UNITY_Email_Billing_Address__c</fullName>
        <externalId>false</externalId>
        <formula>UNITY_Case__r.UNITY_Email_Billing_Address__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Email Billing Address</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>UNITY_Email_Invoice_Guarantee_Text__c</fullName>
        <externalId>false</externalId>
        <formula>UNITY_Case__r.UNITY_Email_Invoice_Guarantee_Text__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Email Invoice Guarantee Text</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>UNITY_Email_Logo_URL__c</fullName>
        <externalId>false</externalId>
        <formula>UNITY_Case__r.UNITY_Email_Logo_URL__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Email Logo URL</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>UNITY_Final_Price2__c</fullName>
        <description>Final Price with Adjustments (No Tax Included)</description>
        <externalId>false</externalId>
        <formula>IF(
  AND(NOT(ISBLANK(UNITY_Discount__c)),UNITY_Discount__c&gt;0), 
  (1-UNITY_Discount__c)*UNITY_Line_Item_Discounted_Price__c,
  IF(
    AND(NOT(ISBLANK(UNITY_Discount_Amount__c)),UNITY_Discount_Amount__c&gt;0),
    UNITY_Line_Item_Discounted_Price__c - UNITY_Discount_Amount__c,
    UNITY_Line_Item_Discounted_Price__c
  )
)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <inlineHelpText>Final Price with Adjustments. No Tax</inlineHelpText>
        <label>Final Price (With Adjustments)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>UNITY_Final_Price__c</fullName>
        <externalId>false</externalId>
        <formula>IF(
  NOT(ISBLANK(UNITY_Discount_Amount__c)),
  (1-UNITY_Discount__c)*UNITY_Line_Item_Discounted_Price__c+ UNITY_Total_Tax__c,
  IF(
    NOT(ISBLANK(UNITY_Discount_Amount__c)),
    UNITY_Line_Item_Discounted_Price__c - UNITY_Discount_Amount__c+ UNITY_Total_Tax__c,
    UNITY_Line_Item_Discounted_Price__c+ UNITY_Total_Tax__c
  )
)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <inlineHelpText>Final Price with Adjustments. Includes Tax</inlineHelpText>
        <label>Final Price</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>UNITY_GL_Company__c</fullName>
        <description>The GL Company the invoice will be posted to in SL</description>
        <externalId>false</externalId>
        <formula>IF(ISBLANK(UNITY_Business_Unit_Account__c),
UNITY_Case__r.UNITY_Business_Unit_Account__r.Company__c
,
UNITY_Business_Unit_Account__r.Company__c)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>GL Company</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>UNITY_Invoice_Balance__c</fullName>
        <description>The balance of the invoice in SL</description>
        <externalId>false</externalId>
        <label>SL Invoice Balance</label>
        <precision>14</precision>
        <required>false</required>
        <scale>2</scale>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>UNITY_Invoice_Comments__c</fullName>
        <externalId>false</externalId>
        <label>Invoice Comments</label>
        <required>false</required>
        <trackFeedHistory>true</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>TextArea</type>
    </fields>
    <fields>
        <fullName>UNITY_Invoice_Date__c</fullName>
        <defaultValue>TODAY()</defaultValue>
        <externalId>false</externalId>
        <label>Invoice Date</label>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>UNITY_Invoice_Description__c</fullName>
        <externalId>false</externalId>
        <label>Invoice Description</label>
        <length>30000</length>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>LongTextArea</type>
        <visibleLines>8</visibleLines>
    </fields>
    <fields>
        <fullName>UNITY_Invoice_External_Id__c</fullName>
        <caseSensitive>false</caseSensitive>
        <description>This field will contain unique record id from source system.</description>
        <externalId>true</externalId>
        <label>UNITY Invoice External Id</label>
        <length>80</length>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>true</unique>
    </fields>
    <fields>
        <fullName>UNITY_Invoice_Margin_Amount__c</fullName>
        <externalId>false</externalId>
        <formula>UNITY_Total_Price_With_Service_Charge__c   - UNITY_Total_Cost__c +  UNITY_Vendor_Service_Fee__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Invoice Margin Amount</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>UNITY_Invoice_Margin__c</fullName>
        <externalId>false</externalId>
        <formula>if( UNITY_Total_Price__c  = 0, 0, UNITY_Invoice_Margin_Amount__c /   UNITY_Total_Price_With_Service_Charge__c )</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Invoice Margin %</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Percent</type>
    </fields>
    <fields>
        <fullName>UNITY_Invoice_Status__c</fullName>
        <externalId>false</externalId>
        <label>Invoice Status</label>
        <required>false</required>
        <trackFeedHistory>true</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Invoice Creation</fullName>
                    <default>true</default>
                    <label>Invoice Creation</label>
                </value>
                <value>
                    <fullName>Invoice sent for Manager Approval</fullName>
                    <default>false</default>
                    <label>Invoice sent for Manager Approval</label>
                </value>
                <value>
                    <fullName>Discount - Approved by Manager</fullName>
                    <default>false</default>
                    <label>Discount - Approved by Manager</label>
                </value>
                <value>
                    <fullName>Discount - Rejected by Manager</fullName>
                    <default>false</default>
                    <label>Discount - Rejected by Manager</label>
                </value>
                <value>
                    <fullName>Invoice Finalized</fullName>
                    <default>false</default>
                    <label>Invoice Finalized</label>
                </value>
                <value>
                    <fullName>Sent to Customer</fullName>
                    <default>false</default>
                    <label>Sent to Customer</label>
                </value>
                <value>
                    <fullName>Returned to Agent</fullName>
                    <default>false</default>
                    <label>Returned to Agent</label>
                </value>
                <value>
                    <fullName>Invoice Amended</fullName>
                    <default>false</default>
                    <label>Invoice Amended</label>
                </value>
                <value>
                    <fullName>Completed</fullName>
                    <default>false</default>
                    <label>Completed</label>
                </value>
                <value>
                    <fullName>Cancelled</fullName>
                    <default>false</default>
                    <label>Cancelled</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>UNITY_Job_Site__c</fullName>
        <externalId>false</externalId>
        <formula>UNITY_Case__r.Account.Name + BR() + 
UNITY_Case__r.Account.ShippingStreet + BR() + 
UNITY_Case__r.Account.ShippingCity + &quot; &quot; + UNITY_Case__r.Account.ShippingState + &quot; &quot; + UNITY_Case__r.Account.ShippingPostalCode + BR() + UNITY_Case__r.Account.ShippingCountry</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Job Site</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>UNITY_Last_Payment_Date_Time__c</fullName>
        <description>The date the last payment was applied in SL</description>
        <externalId>false</externalId>
        <label>SL Last Payment Date/Time</label>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>DateTime</type>
    </fields>
    <fields>
        <fullName>UNITY_Line_Item_Discount_Exists__c</fullName>
        <externalId>false</externalId>
        <label>Line Item Discount Exists ?</label>
        <summarizedField>UNITY_Invoice_Line_Item__c.UNITY_Discount__c</summarizedField>
        <summaryFilterItems>
            <field>UNITY_Invoice_Line_Item__c.UNITY_Line_Status__c</field>
            <operation>notEqual</operation>
            <value>Cancelled</value>
        </summaryFilterItems>
        <summaryForeignKey>UNITY_Invoice_Line_Item__c.UNITY_Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>UNITY_Line_Item_Discounted_Price__c</fullName>
        <externalId>false</externalId>
        <label>Line Item Discounted Price</label>
        <summarizedField>UNITY_Invoice_Line_Item__c.UNITY_Final_Discounted_Price__c</summarizedField>
        <summaryFilterItems>
            <field>UNITY_Invoice_Line_Item__c.UNITY_Line_Status__c</field>
            <operation>notEqual</operation>
            <value>Cancelled</value>
        </summaryFilterItems>
        <summaryForeignKey>UNITY_Invoice_Line_Item__c.UNITY_Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>UNITY_Line_Item_Discounts__c</fullName>
        <externalId>false</externalId>
        <formula>OR ( UNITY_Does_Line_Item_Discount_Amt_Exist__c &gt; 0,    UNITY_Line_Item_Discount_Exists__c &gt;0 )</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Line Item Discounts</label>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>UNITY_Manager_Approved_Discounts__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>Manager Approved Discounts</label>
        <trackFeedHistory>true</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>UNITY_Margin_Value_Approval__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>Margin Value Approval</label>
        <trackFeedHistory>true</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>UNITY_Margin_Value_Sent_for_Approval__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>Margin Value Sent for Approval</label>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>UNITY_Missing_Required_Documentation__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>Missing Required Documentation</label>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>UNITY_Order_Type__c</fullName>
        <externalId>false</externalId>
        <formula>IF( 
UNITY_Case__r.RecordType.DeveloperName = &quot;UNITY_Service_Request&quot;, 
&quot;Service&quot;, 
IF( 
UNITY_Case__r.RecordType.DeveloperName = &quot;UNITY_Preventative_Maintenance&quot;, 
&quot;PM&quot;, 
&quot;Project&quot; 
) 
)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Order Type</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>UNITY_Original_Invoice__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <description>Original invoice if this is a regenerated invoice</description>
        <externalId>false</externalId>
        <label>Original Invoice</label>
        <referenceTo>UNITY_Invoice__c</referenceTo>
        <relationshipName>RegeneratedInvoices</relationshipName>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>UNITY_Reason_Below_Threshold_Margin__c</fullName>
        <externalId>false</externalId>
        <label>Reason - Below Threshold Margin</label>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>No customer-contracted overtime rate</fullName>
                    <default>false</default>
                    <label>No customer-contracted overtime rate</label>
                </value>
                <value>
                    <fullName>Service Partner 4-hour minimum</fullName>
                    <default>false</default>
                    <label>Service Partner 4-hour minimum</label>
                </value>
                <value>
                    <fullName>Failed customer SLA, paid OT rates</fullName>
                    <default>false</default>
                    <label>Failed customer SLA, paid OT rates</label>
                </value>
                <value>
                    <fullName>Expedited due to parts sourcing</fullName>
                    <default>false</default>
                    <label>Expedited due to parts sourcing</label>
                </value>
                <value>
                    <fullName>Work Order Expired</fullName>
                    <default>false</default>
                    <label>Work Order Expired</label>
                </value>
                <value>
                    <fullName>Ordered wrong part</fullName>
                    <default>false</default>
                    <label>Ordered wrong part</label>
                </value>
                <value>
                    <fullName>Remote Dispatch</fullName>
                    <default>false</default>
                    <label>Remote Dispatch</label>
                </value>
                <value>
                    <fullName>In-Correct Service Partner Dispatched</fullName>
                    <default>false</default>
                    <label>In-Correct Service Partner Dispatched</label>
                </value>
                <value>
                    <fullName>Quote vs. IVR</fullName>
                    <default>false</default>
                    <label>Quote vs. IVR</label>
                </value>
                <value>
                    <fullName>Vendor 1 Hour Minimum</fullName>
                    <default>false</default>
                    <label>Vendor 1 Hour Minimum</label>
                </value>
                <value>
                    <fullName>Vendor Rate Exceeds Customer Rate</fullName>
                    <default>false</default>
                    <label>Vendor Rate Exceeds Customer Rate</label>
                </value>
                <value>
                    <fullName>Regional Account - low margin</fullName>
                    <default>false</default>
                    <label>Regional Account - low margin</label>
                </value>
                <value>
                    <fullName>Approved Quoted Work</fullName>
                    <default>false</default>
                    <label>Approved Quoted Work</label>
                </value>
                <value>
                    <fullName>Quoted Work</fullName>
                    <default>false</default>
                    <label>Quoted Work</label>
                </value>
                <value>
                    <fullName>NTE/Tax Discrepancy</fullName>
                    <default>false</default>
                    <label>NTE/Tax Discrepancy</label>
                </value>
                <value>
                    <fullName>1st Trip Completion</fullName>
                    <default>false</default>
                    <label>1st Trip Completion</label>
                </value>
                <value>
                    <fullName>Warranty Service</fullName>
                    <default>false</default>
                    <label>Warranty Service</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>UNITY_SL_Posting_Period__c</fullName>
        <description>The posting period for the Invoice in SL</description>
        <externalId>false</externalId>
        <inlineHelpText>The posting period for the Invoice in SL</inlineHelpText>
        <label>SL Posting Period</label>
        <length>6</length>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>UNITY_SL_Process_Complete__c</fullName>
        <defaultValue>false</defaultValue>
        <description>Denotes that the invoice was successfully posted into SL</description>
        <externalId>false</externalId>
        <label>SL Process Complete</label>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>UNITY_SL_Processed__c</fullName>
        <defaultValue>false</defaultValue>
        <description>Denotes if the invoice has been sent to SL for posting</description>
        <externalId>false</externalId>
        <label>SL Processed</label>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>UNITY_SL_Reference_Id__c</fullName>
        <description>The SL Reference ID</description>
        <externalId>false</externalId>
        <formula>TEXT( UNITY_Doc_Type__c )&amp; RIGHT(Name,8)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>SL Reference Id</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>UNITY_Service_Charge__c</fullName>
        <description>Service Charge Amount for Pass Through Customers</description>
        <externalId>false</externalId>
        <label>Service Charge</label>
        <precision>7</precision>
        <required>false</required>
        <scale>2</scale>
        <trackFeedHistory>true</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>UNITY_Service_Contract_Margin_Value__c</fullName>
        <externalId>false</externalId>
        <label>Service Contract Margin Value</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Percent</type>
    </fields>
    <fields>
        <fullName>UNITY_Shared_To__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Shared To</label>
        <referenceTo>Account</referenceTo>
        <relationshipName>Invoices3</relationshipName>
        <required>false</required>
        <trackFeedHistory>true</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>UNITY_Shared_to_Contact__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Shared to Contact</label>
        <referenceTo>Contact</referenceTo>
        <relationshipName>Invoices</relationshipName>
        <required>false</required>
        <trackFeedHistory>true</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>UNITY_Shared_to_User__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Shared to User</label>
        <referenceTo>User</referenceTo>
        <relationshipName>Invoices1</relationshipName>
        <required>false</required>
        <trackFeedHistory>true</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>UNITY_Status__c</fullName>
        <externalId>false</externalId>
        <label>Customer Status</label>
        <required>false</required>
        <trackFeedHistory>true</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Accepted</fullName>
                    <default>false</default>
                    <label>Accepted</label>
                </value>
                <value>
                    <fullName>Rejected</fullName>
                    <default>false</default>
                    <label>Rejected</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>UNITY_Tax_Posted__c</fullName>
        <defaultValue>false</defaultValue>
        <description>Denotes that the tax for this invoice has been posted into avatax and should not be processed again unless a credit is required</description>
        <externalId>false</externalId>
        <label>Tax Posted</label>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>UNITY_Tax_Process_Result__c</fullName>
        <description>Results of the tax processing</description>
        <externalId>false</externalId>
        <label>Tax Process Result</label>
        <length>1000</length>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>LongTextArea</type>
        <visibleLines>5</visibleLines>
    </fields>
    <fields>
        <fullName>UNITY_Tax_Processed__c</fullName>
        <defaultValue>false</defaultValue>
        <description>Denotes that the tax call out occurred</description>
        <externalId>false</externalId>
        <label>Tax Processed</label>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>UNITY_Total_Adjustments__c</fullName>
        <description>The discounted amount. Includes discounts from invoice and invoice lines</description>
        <externalId>false</externalId>
        <formula>UNITY_Total_Price__c - UNITY_Final_Price2__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Total Adjustments</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>UNITY_Total_Cost__c</fullName>
        <externalId>false</externalId>
        <label>Total Cost</label>
        <summarizedField>UNITY_Invoice_Line_Item__c.UNITY_Cost__c</summarizedField>
        <summaryFilterItems>
            <field>UNITY_Invoice_Line_Item__c.UNITY_Line_Status__c</field>
            <operation>notEqual</operation>
            <value>Cancelled</value>
        </summaryFilterItems>
        <summaryForeignKey>UNITY_Invoice_Line_Item__c.UNITY_Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>UNITY_Total_Cost_w_Vendor_Service_Fees__c</fullName>
        <externalId>false</externalId>
        <formula>UNITY_Total_Cost__c - UNITY_Vendor_Service_Fee__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Total Cost (w/ Vendor Service Fees)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>UNITY_Total_Price_With_Service_Charge__c</fullName>
        <description>Invoice Revenue, does not include tax.</description>
        <externalId>false</externalId>
        <formula>UNITY_Total_Price__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Total Price</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>UNITY_Total_Price__c</fullName>
        <externalId>false</externalId>
        <label>Total Price (Includes Service Charge)</label>
        <summarizedField>UNITY_Invoice_Line_Item__c.UNITY_Total_Price__c</summarizedField>
        <summaryFilterItems>
            <field>UNITY_Invoice_Line_Item__c.UNITY_Excluded_from_Total__c</field>
            <operation>equals</operation>
            <value>False</value>
        </summaryFilterItems>
        <summaryFilterItems>
            <field>UNITY_Invoice_Line_Item__c.UNITY_Line_Status__c</field>
            <operation>notEqual</operation>
            <value>Cancelled</value>
        </summaryFilterItems>
        <summaryForeignKey>UNITY_Invoice_Line_Item__c.UNITY_Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>UNITY_Total_Price_less_Service_Charge__c</fullName>
        <externalId>false</externalId>
        <formula>UNITY_Total_Price__c -  UNITY_Service_Charge__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Total Price-OLD</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>UNITY_Total_Tax__c</fullName>
        <externalId>false</externalId>
        <label>Total Tax</label>
        <summarizedField>UNITY_Invoice_Line_Item__c.UNITY_Sales_Tax__c</summarizedField>
        <summaryFilterItems>
            <field>UNITY_Invoice_Line_Item__c.UNITY_Line_Status__c</field>
            <operation>notEqual</operation>
            <value>Cancelled</value>
        </summaryFilterItems>
        <summaryForeignKey>UNITY_Invoice_Line_Item__c.UNITY_Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>UNITY_Total_Vendor_Supplied_Dis_Price__c</fullName>
        <description>Total Discounted Price of all vendor supplied line items only</description>
        <externalId>false</externalId>
        <label>Vendor Supplied Discounted Price</label>
        <summarizedField>UNITY_Invoice_Line_Item__c.UNITY_Final_Discounted_Price__c</summarizedField>
        <summaryFilterItems>
            <field>UNITY_Invoice_Line_Item__c.UNITY_Is_Vendor_Supply__c</field>
            <operation>equals</operation>
            <value>True</value>
        </summaryFilterItems>
        <summaryFilterItems>
            <field>UNITY_Invoice_Line_Item__c.UNITY_Line_Status__c</field>
            <operation>notEqual</operation>
            <value>Cancelled</value>
        </summaryFilterItems>
        <summaryForeignKey>UNITY_Invoice_Line_Item__c.UNITY_Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>UNITY_Total_Vendor_Supplied_Final_Price__c</fullName>
        <description>Takes the total vendor supplied price from all invoice lines (with discount) and COMBINES with the invoice total discount
Izay: Removed Estimated Tax from Formula</description>
        <externalId>false</externalId>
        <formula>IF(
AND(NOT(ISBLANK(UNITY_Discount__c)),UNITY_Discount__c&gt;0), 
(1-UNITY_Discount__c)*UNITY_Total_Vendor_Supplied_Dis_Price__c,
UNITY_Total_Vendor_Supplied_Dis_Price__c
)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Vendor Supplied Final Price</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>UNITY_Vendor_Service_Fee__c</fullName>
        <externalId>false</externalId>
        <label>Vendor Service Fee</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>Unity_Payment_Status__c</fullName>
        <description>Status updated as payments are applied to the invoice via SL</description>
        <externalId>false</externalId>
        <label>SL Payment Status</label>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Unpaid</fullName>
                    <default>true</default>
                    <label>Unpaid</label>
                </value>
                <value>
                    <fullName>Partially Paid</fullName>
                    <default>false</default>
                    <label>Partially Paid</label>
                </value>
                <value>
                    <fullName>Paid</fullName>
                    <default>false</default>
                    <label>Paid</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <label>Invoice</label>
    <listViews>
        <fullName>All</fullName>
        <columns>NAME</columns>
        <columns>UNITY_Case__c</columns>
        <columns>UNITY_Customer__c</columns>
        <columns>UNITY_Job_Site__c</columns>
        <columns>UNITY_Invoice_Status__c</columns>
        <columns>UNITY_Invoice_Date__c</columns>
        <columns>UNITY_Agent__c</columns>
        <columns>UNITY_Tax_Processed__c</columns>
        <columns>UNITY_Tax_Posted__c</columns>
        <filterScope>Everything</filterScope>
        <label>All</label>
        <language>en_US</language>
    </listViews>
    <listViews>
        <fullName>Cancelled_Invoices</fullName>
        <columns>NAME</columns>
        <columns>UNITY_SL_Reference_Id__c</columns>
        <columns>UNITY_Customer__c</columns>
        <columns>UNITY_Job_Site__c</columns>
        <columns>UNITY_Invoice_Date__c</columns>
        <columns>UNITY_Invoice_Status__c</columns>
        <columns>UNITY_Tax_Processed__c</columns>
        <columns>UNITY_Tax_Posted__c</columns>
        <columns>UNITY_Total_Tax__c</columns>
        <columns>UNITY_Final_Price__c</columns>
        <columns>UNITY_Agent__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>UNITY_Invoice_Status__c</field>
            <operation>equals</operation>
            <value>Cancelled</value>
        </filters>
        <label>Cancelled Invoices</label>
        <language>en_US</language>
    </listViews>
    <listViews>
        <fullName>Finalized_Invoices</fullName>
        <columns>NAME</columns>
        <columns>UNITY_SL_Reference_Id__c</columns>
        <columns>UNITY_Customer__c</columns>
        <columns>UNITY_Job_Site__c</columns>
        <columns>UNITY_Invoice_Date__c</columns>
        <columns>UNITY_Invoice_Status__c</columns>
        <columns>UNITY_Tax_Processed__c</columns>
        <columns>UNITY_Tax_Posted__c</columns>
        <columns>UNITY_Total_Tax__c</columns>
        <columns>UNITY_Final_Price__c</columns>
        <columns>UNITY_Agent__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>UNITY_Invoice_Status__c</field>
            <operation>equals</operation>
            <value>Invoice Finalized</value>
        </filters>
        <label>Finalized Invoices</label>
        <language>en_US</language>
    </listViews>
    <listViews>
        <fullName>Intercompany_Invoices</fullName>
        <columns>NAME</columns>
        <columns>UNITY_Customer__c</columns>
        <columns>MSPFS_Intercompany_Transfer__c</columns>
        <columns>UNITY_SL_Processed__c</columns>
        <columns>UNITY_SL_Process_Complete__c</columns>
        <columns>UNITY_GL_Company__c</columns>
        <columns>UNITY_Business_Unit_Account__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>MSPFS_Intercompany_Transfer__c</field>
            <operation>equals</operation>
            <value>1</value>
        </filters>
        <filters>
            <field>UNITY_SL_Processed__c</field>
            <operation>equals</operation>
            <value>1</value>
        </filters>
        <label>Intercompany Invoices / Processed</label>
        <language>en_US</language>
        <sharedTo>
            <role>System_Administrator</role>
        </sharedTo>
    </listViews>
    <listViews>
        <fullName>Invoice_Creation</fullName>
        <columns>NAME</columns>
        <columns>UNITY_Customer__c</columns>
        <columns>UNITY_Job_Site__c</columns>
        <columns>UNITY_Invoice_Date__c</columns>
        <columns>UNITY_Invoice_Status__c</columns>
        <columns>UNITY_Tax_Processed__c</columns>
        <columns>UNITY_Tax_Posted__c</columns>
        <columns>UNITY_Total_Tax__c</columns>
        <columns>UNITY_Service_Charge__c</columns>
        <columns>UNITY_Final_Price__c</columns>
        <columns>UNITY_Agent__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>UNITY_Invoice_Status__c</field>
            <operation>equals</operation>
            <value>Invoice Creation</value>
        </filters>
        <filters>
            <field>UNITY_GL_Company__c</field>
            <operation>equals</operation>
            <value>15</value>
        </filters>
        <label>NSBS - Invoice Creation</label>
        <language>en_US</language>
    </listViews>
    <listViews>
        <fullName>MNS_Invoice_Creation</fullName>
        <columns>NAME</columns>
        <columns>UNITY_Customer__c</columns>
        <columns>UNITY_Job_Site__c</columns>
        <columns>UNITY_Invoice_Date__c</columns>
        <columns>UNITY_Invoice_Status__c</columns>
        <columns>UNITY_Tax_Processed__c</columns>
        <columns>UNITY_Tax_Posted__c</columns>
        <columns>UNITY_Total_Tax__c</columns>
        <columns>UNITY_Final_Price__c</columns>
        <columns>UNITY_Agent__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>UNITY_Invoice_Status__c</field>
            <operation>equals</operation>
            <value>Invoice Creation</value>
        </filters>
        <filters>
            <field>UNITY_GL_Company__c</field>
            <operation>equals</operation>
            <value>03</value>
        </filters>
        <label>MNS - Invoice Creation</label>
        <language>en_US</language>
    </listViews>
    <nameField>
        <displayFormat>INV-{0000000000}</displayFormat>
        <label>Invoice ID</label>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <type>AutoNumber</type>
    </nameField>
    <pluralLabel>Invoices</pluralLabel>
    <recordTypeTrackFeedHistory>false</recordTypeTrackFeedHistory>
    <recordTypeTrackHistory>false</recordTypeTrackHistory>
    <recordTypes>
        <fullName>UNITY_Invoice</fullName>
        <active>true</active>
        <label>UNITY Invoice</label>
        <picklistValues>
            <picklist>UNITY_Doc_Type__c</picklist>
            <values>
                <fullName>CM</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>IN</fullName>
                <default>true</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>UNITY_Invoice_Status__c</picklist>
            <values>
                <fullName>Cancelled</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Completed</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Discount - Approved by Manager</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Discount - Rejected by Manager</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Invoice Amended</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Invoice Creation</fullName>
                <default>true</default>
            </values>
            <values>
                <fullName>Invoice Finalized</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Invoice sent for Manager Approval</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Returned to Agent</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Sent to Customer</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>UNITY_Reason_Below_Threshold_Margin__c</picklist>
            <values>
                <fullName>1st Trip Completion</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Approved Quoted Work</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Expedited due to parts sourcing</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Failed customer SLA%2C paid OT rates</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>In-Correct Service Partner Dispatched</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>NTE%2FTax Discrepancy</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>No customer-contracted overtime rate</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Ordered wrong part</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Quote vs%2E IVR</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Quoted Work</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Regional Account - low margin</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Remote Dispatch</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Service Partner 4-hour minimum</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Vendor 1 Hour Minimum</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Vendor Rate Exceeds Customer Rate</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Warranty Service</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Work Order Expired</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>UNITY_Status__c</picklist>
            <values>
                <fullName>Accepted</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Rejected</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <searchLayouts>
        <searchResultsAdditionalFields>UNITY_Invoice_Status__c</searchResultsAdditionalFields>
    </searchLayouts>
    <sharingModel>Read</sharingModel>
    <startsWith>Vowel</startsWith>
    <validationRules>
        <fullName>Invoice_Creation_to_Completed_Restrict</fullName>
        <active>true</active>
        <description>cannot move invoice from creation to completed</description>
        <errorConditionFormula>AND( 
ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Invoice Creation&apos;), 
ISPICKVAL(UNITY_Invoice_Status__c,&apos;Completed&apos;) 
)</errorConditionFormula>
        <errorMessage>Invoice cannot be set to Completed at this stage.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>UNITY_Agent_Cannot_Save_Manager_Statuses</fullName>
        <active>true</active>
        <description>Agent cannot save the proposal record in manager statuses</description>
        <errorConditionFormula>AND ( 
CONTAINS( $User.Id ,  UNITY_Case__r.OwnerId  ), 
OR( 
ISPICKVAL( UNITY_Invoice_Status__c , &apos;Discount - Approved by Manager&apos;), 
ISPICKVAL( UNITY_Invoice_Status__c , &apos;Discount - Rejected by Manager&apos;),
ISPICKVAL( UNITY_Invoice_Status__c , &apos;Invoice sent for Manager Approval&apos;) 

) 
)</errorConditionFormula>
        <errorMessage>Cannot Save record with Status: Manager Approved / Rejected. Please change to the appropriate status.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>UNITY_Cancelled_Completed_Restrict</fullName>
        <active>false</active>
        <description>Restrict edit of record from completed or cancelled.</description>
        <errorConditionFormula>OR( ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Completed&apos;),
ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Cancelled&apos;) )</errorConditionFormula>
        <errorMessage>Record cannot be edited after it has been set to Completed or Cancelled</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>UNITY_Discount_Edit_Customer_Accept</fullName>
        <active>true</active>
        <description>Restrict changes to the discount fields if Customer Status is Accepted</description>
        <errorConditionFormula>if( 
AND( 
ISPICKVAL(  UNITY_Status__c  ,&apos;Accepted&apos;), 
OR( ISCHANGED( UNITY_Discount__c ), ISCHANGED(  UNITY_Discount_Amount__c  ) )
) 
, true, false)</errorConditionFormula>
        <errorMessage>The Customer has Accepted the Invoice, discount fields cannot be changed</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>UNITY_Discount_Percent_Amount</fullName>
        <active>true</active>
        <description>Ensures that either Amount or % field is used</description>
        <errorConditionFormula>OR ( 
AND (if(UNITY_Discount__c &gt; 0,true,false), if(UNITY_Discount_Amount__c &gt; 0,true,false) ) 
)</errorConditionFormula>
        <errorMessage>Please enter value in one of the two fields: Discount % or Discount Amount</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>UNITY_Final_NOT_SL_Process_Completed</fullName>
        <active>false</active>
        <description>Error when trying to edit the invoice and it has not been posted to SL</description>
        <errorConditionFormula>AND(
AND(
$UserRole.Name != &quot;System Administrator&quot;,
$UserRole.Name != &quot;Integration User&quot;
),
OR(
AND(
NOT(ISCHANGED(UNITY_Invoice_Status__c)),
ISPICKVAL(UNITY_Invoice_Status__c,&quot;Invoice Finalized&quot;)
),
AND(
ISCHANGED(UNITY_Invoice_Status__c),
ISPICKVAL(PRIORVALUE(UNITY_Invoice_Status__c),&quot;Invoice Finalized&quot;),
NOT(UNITY_SL_Process_Complete__c)
)
)
)</errorConditionFormula>
        <errorMessage>This invoice cannot be edited. To credit or make corrections to the invoice click on the Dispute button.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>UNITY_Final_TaxError</fullName>
        <active>true</active>
        <description>Cannot finalize invoice if there are tax errors</description>
        <errorConditionFormula>AND(
$UserRole.Name != &quot;System Administrator&quot;,
OR(
AND(
NOT(CONTAINS(UNITY_Tax_Process_Result__c,&quot;Success&quot;)),
ISPICKVAL(UNITY_Invoice_Status__c,&quot;Invoice Finalized&quot;)
),
AND(
ISPICKVAL(UNITY_Invoice_Status__c,&quot;Invoice Finalized&quot;),
NOT(UNITY_Tax_Processed__c)  
)
)
)</errorConditionFormula>
        <errorMessage>Tax Process has not completed or an error occurred while processing tax. Refresh the page and verify that tax process is successful.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>UNITY_Invoice_Restrict_Customer_Edit</fullName>
        <active>true</active>
        <description>Restrict customer from editing the Invoice when it is not in &quot;Sent to Customer&quot; status</description>
        <errorConditionFormula>AND(!ISPICKVAL(  UNITY_Invoice_Status__c  , &apos;Sent to Customer&apos;) , if(CONTAINS(  $Profile.Name , &apos;UNITY_Customer&apos; ),true,false) )</errorConditionFormula>
        <errorMessage>The Invoice is currently being handled by the Agent. The Invoice cannot be edited at this moment. Please contact the Agent for further clarification</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>UNITY_Invoice_status_restrictions</fullName>
        <active>true</active>
        <description>Disallow illegal status changes</description>
        <errorConditionFormula>AND ( 
RecordType.Name = &apos;UNITY Invoice&apos;, 
OR ( 


If ( AND (ISPICKVAL( UNITY_Invoice_Status__c , &apos;Invoice sent for Manager Approval&apos;), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Returned to Agent&apos; )), true, false) , 
If ( AND (ISPICKVAL( UNITY_Invoice_Status__c , &apos;Discount - Approved by Manager&apos;), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Returned to Agent&apos; )), true, false) , 
If ( AND (ISPICKVAL( UNITY_Invoice_Status__c , &apos;Completed&apos;), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Returned to Agent&apos; )), true, false) , 
If ( AND (ISPICKVAL( UNITY_Invoice_Status__c , &apos;Cancelled&apos;), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Returned to Agent&apos; )), true, false) , 

If ( AND (ISPICKVAL( UNITY_Invoice_Status__c , &apos;Invoice sent for Manager Approval&apos;), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Sent to Customer&apos; )), true, false) , 
If ( AND (ISPICKVAL( UNITY_Invoice_Status__c , &apos;Discount - Rejected by Manager&apos;), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Sent to Customer&apos; )), true, false) , 
If ( AND (ISPICKVAL( UNITY_Invoice_Status__c , &apos;Discount - Approved by Manager&apos;), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Sent to Customer&apos; )), true, false) , 
If ( AND (ISPICKVAL( UNITY_Invoice_Status__c , &apos;Invoice Creation&apos;), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Sent to Customer&apos; )), true, false) , 
If ( AND (ISPICKVAL( UNITY_Invoice_Status__c , &apos;Invoice Amended&apos;), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Sent to Customer&apos; )), true, false) , 
If ( AND (ISPICKVAL( UNITY_Invoice_Status__c , &apos;Completed&apos;), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Sent to Customer&apos; )), true, false) , 
If ( AND (ISPICKVAL( UNITY_Invoice_Status__c , &apos;Cancelled&apos;), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Sent to Customer&apos; )), true, false) , 

If ( AND (ISPICKVAL( UNITY_Invoice_Status__c , &apos;Sent to Customer&apos;), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Discount - Rejected by Manager&apos; )), true, false) , 
If ( AND (ISPICKVAL( UNITY_Invoice_Status__c , &apos;Discount - Approved by Manager&apos;), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Discount - Rejected by Manager&apos; )), true, false) , 
If ( AND (ISPICKVAL( UNITY_Invoice_Status__c , &apos;Completed&apos;), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Discount - Rejected by Manager&apos; )), true, false) , 

If ( AND (ISPICKVAL( UNITY_Invoice_Status__c , &apos;Invoice sent for Manager Approval&apos;), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Discount - Approved by Manager&apos; )), true, false) , 
If ( AND (ISPICKVAL( UNITY_Invoice_Status__c , &apos;Returned to Agent&apos;), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Discount - Approved by Manager&apos; )), true, false) , 
If ( AND (ISPICKVAL( UNITY_Invoice_Status__c , &apos;Completed&apos;), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Discount - Approved by Manager&apos; )), true, false) , 

If ( AND ((ISPICKVAL( UNITY_Invoice_Status__c , &apos;Completed&apos;)), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Invoice Creation&apos; )), true, false) , 
If ( AND ((ISPICKVAL( UNITY_Invoice_Status__c , &apos;Discount - Approved by Manager&apos;)), ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Invoice Creation&apos; )), true, false) 

) 
)</errorConditionFormula>
        <errorMessage>This Invoice status change is not permitted. Please set the Invoice record to a correct status</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>UNITY_Lock_Discount_Fields</fullName>
        <active>true</active>
        <description>Lock discount fields in Sent to customer, Approved Discount, completed or cancelled from Manager stages</description>
        <errorConditionFormula>OR (
if(
AND(
OR (ISPICKVAL(   UNITY_Invoice_Status__c   ,&apos;Sent to Customer&apos;), ISPICKVAL( UNITY_Invoice_Status__c ,&apos;Completed&apos;), ISPICKVAL( UNITY_Invoice_Status__c ,&apos;Cancelled&apos;), ISPICKVAL( UNITY_Invoice_Status__c ,&apos;Returned to Agent&apos;),ISPICKVAL( UNITY_Invoice_Status__c ,&apos;Discount - Approved by Manager&apos;)), 
ISCHANGED( UNITY_Discount__c )
)
, true, false),
if(
AND(
OR (ISPICKVAL(   UNITY_Invoice_Status__c   ,&apos;Sent to Customer&apos;), ISPICKVAL( UNITY_Invoice_Status__c ,&apos;Completed&apos;), ISPICKVAL( UNITY_Invoice_Status__c ,&apos;Cancelled&apos;), ISPICKVAL( UNITY_Invoice_Status__c ,&apos;Returned to Agent&apos;),ISPICKVAL( UNITY_Invoice_Status__c ,&apos;Discount - Approved by Manager&apos;)), 
ISCHANGED( UNITY_Discount_Amount__c )
)
, true, false)
)</errorConditionFormula>
        <errorMessage>Discount fields cannot be changed in &apos;Discount - Approved by Manager&apos;, &apos;Sent to Customer&apos;, &apos;Completed&apos;, &apos;Returned to Agent&apos; or &apos;Cancelled&apos; statuses</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>UNITY_Lock_On_Disputed</fullName>
        <active>true</active>
        <description>Prevent edits to invoice once it is on Disputed status</description>
        <errorConditionFormula>AND(
 NOT($User.Ignore_Validations__c),
 ISPICKVAL(UNITY_Invoice_Status__c,&quot;Disputed&quot;),
 IF(AND(
  ISCHANGED(UNITY_Invoice_Status__c),
  ISPICKVAL(PRIORVALUE(UNITY_Invoice_Status__c),&quot;Invoice Finalized&quot;)
  ),
  FALSE,
  TRUE
 ),
 AND(
  NOT(ISCHANGED(UNITY_Tax_Processed__c)),
  NOT(ISCHANGED(UNITY_Tax_Posted__c)),
  NOT(ISCHANGED(UNITY_Agent__c))
 )
)</errorConditionFormula>
        <errorMessage>The invoice has been disputed and it is locked.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>UNITY_Lock_On_Finalized</fullName>
        <active>true</active>
        <description>Error when trying to edit the invoice and:
-Not Integration User profile
-Not Ignore Validations user
-Change anything when on Invoice Finalized
-Change inv status and SL Process Completed is not True
-Change status to other than Disputed</description>
        <errorConditionFormula>AND(
 NOT($User.Ignore_Validations__c),
 AND(
  NOT(ISCHANGED(UNITY_Tax_Processed__c)),
  NOT(ISCHANGED(UNITY_Tax_Posted__c)),
  NOT(ISCHANGED(UNITY_Missing_Required_Documentation__c)),
  NOT(ISCHANGED(UNITY_SL_Process_Complete__c)),
  NOT(ISCHANGED(UNITY_Last_Payment_Date_Time__c)),
  NOT(ISCHANGED(UNITY_Agent__c)),
  NOT(ISCHANGED(UNITY_Invoice_Balance__c)),
  ISPICKVAL(UNITY_Invoice_Status__c,&quot;Invoice Finalized&quot;),
  ISPICKVAL(PRIORVALUE(UNITY_Invoice_Status__c),&quot;Invoice Finalized&quot;)
 ),
 IF(
  AND(
   ISCHANGED(UNITY_Invoice_Status__c),
   ISPICKVAL(UNITY_Invoice_Status__c,&quot;Disputed&quot;),
   ISPICKVAL(PRIORVALUE(UNITY_Invoice_Status__c),&quot;Invoice Finalized&quot;)
  ),
  FALSE,
  TRUE
 )
)</errorConditionFormula>
        <errorMessage>This invoice cannot be edited. To credit or make corrections to the invoice use the Dispute button. Note that the invoice needs to be finalized, tax needs to be posted, and the SL Process needs to complete before the invoice can be credited.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>UNITY_Margin_Sent_to_Customer</fullName>
        <active>true</active>
        <description>Do no allow Margin value &lt; SC margin to move into sent to customer</description>
        <errorConditionFormula>AND (
if(UNITY_Invoice_Margin__c &lt; UNITY_Service_Contract_Margin_Value__c, true, false), 
OR ( ISPICKVAL(UNITY_Invoice_Status__c,&apos;Sent to Customer&apos;),
ISPICKVAL(UNITY_Invoice_Status__c,&apos;Returned to Agent&apos;),
ISPICKVAL(UNITY_Invoice_Status__c,&apos;Completed&apos;) ), 
UNITY_Margin_Value_Approval__c = false
)</errorConditionFormula>
        <errorMessage>You cannot send the Invoice to the customer, if the Margin Value is lower than on the Service Contract, please submit this for approval before sending it to the customer.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>UNITY_Reason_Margin_Rule</fullName>
        <active>true</active>
        <description>Margin rule reason is required when Margin value &lt; SC margin value before being sent for approval</description>
        <errorConditionFormula>AND(
if ( UNITY_Invoice_Margin__c &lt; UNITY_Service_Contract_Margin_Value__c , true, false),
NOT(ISPICKVAL(UNITY_Invoice_Status__c,&apos;Invoice Creation&apos;)),
NOT(ISPICKVAL(UNITY_Invoice_Status__c, &apos;Cancelled&apos;)), 
ISPICKVAL( UNITY_Reason_Below_Threshold_Margin__c, &apos;&apos; )
)</errorConditionFormula>
        <errorDisplayField>UNITY_Reason_Below_Threshold_Margin__c</errorDisplayField>
        <errorMessage>Please select a Reason to explain why the margin value is less than margin value on the Service Contract</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>UNITY_Restrict_Agents_Skipping_Approvals</fullName>
        <active>true</active>
        <description>If discount exists and Manger Approved Discount is unchecked, the proposal cannot move into following status: Sent to Customer, Return to Agent, Proposal Completed, Proposal Amended &amp; sent to customer.</description>
        <errorConditionFormula>AND 
( 
OR 
( 
if( UNITY_Discount_Amount__c  &gt; 0,true,false), 
if( UNITY_Discount__c  &gt; 0,true,false), 
if( UNITY_Line_Item_Discount_Exists__c  &gt; 0,true,false), 
if( UNITY_Does_Line_Item_Discount_Amt_Exist__c  &gt; 0,true,false) 
) 
, 
if( UNITY_Manager_Approved_Discounts__c  = false,true,false) 
, 
OR 
( 
if(ISPICKVAL(UNITY_Invoice_Status__c, &apos;Sent to Customer&apos;),true,false),  
if(ISPICKVAL(UNITY_Invoice_Status__c, &apos;Returned to Agent&apos;),true,false), 
if(ISPICKVAL(UNITY_Invoice_Status__c, &apos;Completed&apos;),true,false) 
) 
)</errorConditionFormula>
        <errorMessage>The Invoice contains discounts. Please submit the Invoice for approval. Please contact the system administrator for more details.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>UNITY_Restrict_Invoice_Amended</fullName>
        <active>false</active>
        <description>Cannot move status to Invoice Amended if the Customer status is Accepted</description>
        <errorConditionFormula>AND ( OR (ISPICKVAL(  UNITY_Status__c  , &apos;Accepted&apos;) ,  AND (UNITY_Manager_Approved_Discounts__c = true,  ISPICKVAL(UNITY_Status__c,&apos;&apos;) ) ) , 

OR ( ISPICKVAL( UNITY_Invoice_Status__c , &apos;Invoice Amended&apos;) , ISPICKVAL( UNITY_Invoice_Status__c , &apos;Invoice Creation&apos;) , ISPICKVAL( UNITY_Invoice_Status__c , &apos;Returned to Agent&apos;))
)</errorConditionFormula>
        <errorMessage>The invoice cannot be amended once the customer has Accepted the Invoice or Manager has approved the discount</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>UNITY_nvoice_Creation_Completed_Restrict</fullName>
        <active>true</active>
        <description>cannot move invoice from creation to completed</description>
        <errorConditionFormula>AND( 
ISPICKVAL(PRIORVALUE( UNITY_Invoice_Status__c ),&apos;Invoice Creation&apos;), 
ISPICKVAL(UNITY_Invoice_Status__c,&apos;Completed&apos;) 
)</errorConditionFormula>
        <errorMessage>Invoice cannot be set to Completed at this stage.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>UNITY_reject_reason_invoice</fullName>
        <active>true</active>
        <description>customers need reason to reject an invoice</description>
        <errorConditionFormula>AND (
ISPICKVAL( UNITY_Status__c,&apos;Rejected&apos;),
 UNITY_Comments__c = &apos;&apos;
)</errorConditionFormula>
        <errorMessage>Please enter the reason for rejecting the Invoice</errorMessage>
    </validationRules>
    <visibility>Public</visibility>
    <webLinks>
        <fullName>Dispute</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Dispute</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!requireScript(&quot;/support/console/36.0/integration.js&quot;)};

var status = &apos;{!UNITY_Invoice__c.UNITY_Invoice_Status__c}&apos;;
var processed = {!UNITY_Invoice__c.UNITY_SL_Process_Complete__c};
var taxPosted = {!UNITY_Invoice__c.UNITY_Tax_Posted__c};
console.log(&apos;Criteria: &apos; + status + &apos;, &apos; + processed + &apos;, &apos; + taxPosted);
if(status == &apos;Invoice Finalized&apos; &amp;&amp; processed &amp;&amp; taxPosted){ 

//Salesforce does not allow duplicate primary tabs and does not let us capture this error other than console log. Comparing the primary and subtab&apos;s object ids will tell us if we are in a primary or subtab 

var primaryTabObjId, subTabObjId, primaryTabId; 

sforce.console.getFocusedSubtabObjectId(function(result){ 
subTabObjId = result.id; 
console.log(&apos;subTabObjId:&apos; + subTabObjId); 
}); 

sforce.console.getFocusedPrimaryTabObjectId(function(result){ 
primaryTabObjId = result.id; 
console.log(&apos;primaryTabObjId:&apos;+result.id); 
}); 

sforce.console.getFocusedPrimaryTabId(function(result){ 
primaryTabId = result.id; 
}); 

if (primaryTabObjId == subTabObjId){ 
sforce.console.openPrimaryTab(primaryTabId ,&apos;/apex/UNITYUNITY_Dispute_Invoice_Button?id={!UNITY_Invoice__c.Id}&apos;, true, &apos;New Invoice&apos;); 
} 
else{ 
console.log(&apos;we are in a sub tab&apos;); 
sforce.console.getFocusedSubtabId(function(result){ 
var subTabId = result.id; 
sforce.console.openSubtab(primaryTabId,&apos;/apex/UNITYUNITY_Dispute_Invoice_Button?id={!UNITY_Invoice__c.Id}&apos;, true, &apos;New Invoice&apos;, subTabId) 
}); 
} 
}else{ 
alert(&apos;The invoice needs to be finalized, tax needs to be posted, and the SL Process needs to complete before the invoice can be credited.&apos;); 
}</url>
    </webLinks>
    <webLinks>
        <fullName>Dispute_v2</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <hasMenubar>false</hasMenubar>
        <hasScrollbars>true</hasScrollbars>
        <hasToolbar>false</hasToolbar>
        <height>600</height>
        <isResizable>true</isResizable>
        <linkType>page</linkType>
        <masterLabel>Dispute v2</masterLabel>
        <openType>newWindow</openType>
        <page>UNITYUNITY_Dispute_Invoice_Button</page>
        <position>none</position>
        <protected>false</protected>
        <showsLocation>false</showsLocation>
        <showsStatus>false</showsStatus>
    </webLinks>
    <webLinks>
        <fullName>Print_Invoice</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <encodingKey>UTF-8</encodingKey>
        <hasMenubar>false</hasMenubar>
        <hasScrollbars>true</hasScrollbars>
        <hasToolbar>false</hasToolbar>
        <height>600</height>
        <isResizable>true</isResizable>
        <linkType>url</linkType>
        <masterLabel>Print Invoice</masterLabel>
        <openType>newWindow</openType>
        <position>none</position>
        <protected>false</protected>
        <showsLocation>false</showsLocation>
        <showsStatus>false</showsStatus>
        <url>/apex/UNITY_CustomerInvoice?id={!UNITY_Invoice__c.Id}</url>
    </webLinks>
    <webLinks>
        <fullName>UNITY_Accept</fullName>
        <availability>online</availability>
        <description>Clicking on the button will change the status of the proposal to &quot;Accepted / Approved&quot;</description>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Accept</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!REQUIRESCRIPT(&quot;/soap/ajax/27.0/connection.js&quot;)}
 
var objInvoice = new sforce.SObject(&apos;UNITY_Invoice__c&apos;);
 
objInvoice.Id = &apos;{!UNITY_Invoice__c.Id}&apos;;
objInvoice.UNITY_Status__c = &apos;Accepted&apos;;
 
var result = sforce.connection.update([objInvoice]);
if(result[0].success==&apos;true&apos;){
    alert(&apos;The Invoice has been Accepted&apos;);
    location.reload(true);
}</url>
    </webLinks>
    <webLinks>
        <fullName>UNITY_New_Invoice_from_Account</fullName>
        <availability>online</availability>
        <displayType>massActionButton</displayType>
        <linkType>javascript</linkType>
        <masterLabel>New Invoice</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <requireRowSelection>false</requireRowSelection>
        <url>{!requireScript(&quot;/support/console/35.0/integration.js&quot;)} 

sourceSObject = &apos;Account&apos;; 
targetSObject = &apos;UNITY_Invoice__c&apos;; 


parentId = &apos;{!UNITY_Invoice__c.UNITY_CustomerId__c}&apos;; 

baseUrl = &apos;{!URLFOR($Action.UNITY_Invoice__c.New)}&apos;;


url =&apos;/apex/UNITY_AutopopulateChild?baseUrl=&apos;+encodeURIComponent(baseUrl)+&apos;&amp;sourceSObject=&apos;+sourceSObject+&apos;&amp;targetSObject=&apos;+targetSObject+&apos;&amp;parentId=&apos;+parentId;

if ((typeof sforce == &apos;object&apos; ) &amp;&amp; sforce.console.isInConsole()) { 

     sforce.console.getEnclosingPrimaryTabId(function(primatyTab){ 
     sforce.console.openSubtab(primatyTab.id, url, true, &apos;New&apos;); 
}); 
}else{
    window.open(url,&apos;_blank&apos;); 
}</url>
    </webLinks>
    <webLinks>
        <fullName>UNITY_New_Invoice_from_Case</fullName>
        <availability>online</availability>
        <displayType>massActionButton</displayType>
        <linkType>javascript</linkType>
        <masterLabel>New Invoice</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <requireRowSelection>true</requireRowSelection>
        <url>{!requireScript(&quot;/support/console/35.0/integration.js&quot;)} 

sourceSObject = &apos;Case&apos;; 
targetSObject = &apos;UNITY_Invoice__c&apos;; 

parentId = &apos;{!Case.Id}&apos;; 

baseUrl = &apos;{!URLFOR($Action.UNITY_Invoice__c.New)}&apos;;


url =&apos;/apex/UNITY_AutopopulateChild?baseUrl=&apos;+encodeURIComponent(baseUrl)+&apos;&amp;sourceSObject=&apos;+sourceSObject+&apos;&amp;targetSObject=&apos;+targetSObject+&apos;&amp;parentId=&apos;+parentId;

if ((typeof sforce == &apos;object&apos; ) &amp;&amp; sforce.console.isInConsole()) { 

     sforce.console.getEnclosingPrimaryTabId(function(primatyTab){ 
     sforce.console.openSubtab(primatyTab.id, url, true, &apos;New&apos;); 
}); 
}else{
    window.open(url,&apos;_blank&apos;); 
}</url>
    </webLinks>
    <webLinks>
        <fullName>UNITY_Rejected</fullName>
        <availability>online</availability>
        <description>Clicking on the button will change the status of the proposal to &quot;Rejected&quot;</description>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Reject</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!REQUIRESCRIPT(&quot;/soap/ajax/27.0/connection.js&quot;)} 

var objInvoice = new sforce.SObject(&apos;UNITY_Invoice__c&apos;); 

objInvoice.Id = &apos;{!UNITY_Invoice__c.Id}&apos;; 
objInvoice.UNITY_Status__c = &apos;Rejected&apos;; 

var result = sforce.connection.update([objInvoice]); 
if(result[0].success==&apos;true&apos;){ 
alert(&apos;The Invoice has been Rejected&apos;); 
location.reload(true); 
}</url>
    </webLinks>
</CustomObject>
